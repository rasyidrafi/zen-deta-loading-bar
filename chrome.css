/*
 * =================================================================
 *  Top Loading Bar for Zen Browser - CSS-Only Method
 * =================================================================
 *  This targets the main content wrapper (#zen-appcontent-wrapper)
 *  and is triggered ONLY on page load via the [waiting] attribute.
 */

:root {
  --mod-detaloadingbar-maincolor: var(--mod-detaloadingbar-maincolor, rgba(243,202,176,255));
  --mod-detaloadingbar-middlecolor: var(--mod-detaloadingbar-middlecolor, rgba(255,255,255,255));
  --mod-detaloadingbar-thickness: var(--mod-detaloadingbar-thickness, 3px);
}

/* First, ensure the wrapper can act as a positioning container */
#zen-appcontent-wrapper {
  position: relative !important;
}

/* Now, create the loading bar inside it when the window is loading */
#main-window[waiting] #zen-appcontent-wrapper::before {
  content: "" !important;
  position: absolute !important;
  top: 0 !important;
  left: 0 !important;
  width: 100% !important;
  height: var(--mod-detaloadingbar-thickness) !important;
  z-index: 9999 !important; /* High z-index to ensure it's on top */
  pointer-events: none !important; /* Makes sure you can't click on it */

  /* The animated gradient for the loading effect */
  background-image: linear-gradient(
    to right,
    var(--mod-detaloadingbar-maincolor),
    var(--mod-detaloadingbar-middlecolor),
    var(--mod-detaloadingbar-maincolor)
  ) !important;
  background-size: 200% auto !important;

  /* The animation itself */
  animation: zen-loading-bar 1.5s linear infinite !important;
}

/* Keyframes for the animation */
@keyframes zen-loading-bar {
  from {
    background-position: 200% 0;
  }
  to {
    background-position: -200% 0;
  }
}
